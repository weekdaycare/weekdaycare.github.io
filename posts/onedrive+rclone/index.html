<!DOCTYPE html><html lang="zh-CN"><head><script>(()=>{var e=()=>console.error("Service Worker 注册失败！可能是由于您的浏览器不支持该功能！");navigator.serviceWorker?.register("/sw.js")?.then(()=>{navigator.serviceWorker.addEventListener("message",e=>{var a=e.data;switch(a.type){case"update":var r=a.new.global+"."+a.new.local;localStorage.getItem("lastVersion")!==r&&(hud.toast("已更新至新版本："+r,5e3),localStorage.setItem("lastVersion",r));break;case"escape":hud.toast("逃生门缓存更新完毕",5e3)}})})?.catch(e)||e()})()</script><meta charset="utf-8"><meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1" theme-name="Stellar" theme-version="1.29.1"><meta name="generator" content="Hexo 7.3.0"><meta http-equiv="x-dns-prefetch-control" content="on"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1c1e21"><meta name="theme-color" content="#f9fafb"><title>轻量云服务期搭建Ondrive离线下载 - 星日语</title><meta name="description" content="本文使用的是腾讯云的轻量应用服务器 系统 CentOS 7.6 ARIA2 直接使用github大佬的aria2增强脚本，提速超级明显  上面的代码大概率无法下载，因为服务器被墙了，连不上Github 可以使用下面的代码 codeblock:true wget -N --no-check-certificate https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;P3TERX&#x2F;ar"><meta property="og:type" content="article"><meta property="og:title" content="轻量云服务期搭建Ondrive离线下载"><meta property="og:url" content="https://weekdaycare.cn/posts/onedrive+rclone/"><meta property="og:site_name" content="星日语"><meta property="og:description" content="本文使用的是腾讯云的轻量应用服务器 系统 CentOS 7.6 ARIA2 直接使用github大佬的aria2增强脚本，提速超级明显  上面的代码大概率无法下载，因为服务器被墙了，连不上Github 可以使用下面的代码 codeblock:true wget -N --no-check-certificate https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;P3TERX&#x2F;ar"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-06-28T13:14:05.000Z"><meta property="article:modified_time" content="2022-06-30T14:00:00.000Z"><meta property="article:author" content="星日语"><meta property="article:tag" content="教程"><meta name="twitter:card" content="summary"><meta name="keywords" content="教程"><link rel="alternate" href="/atom.xml" title="星日语" type="application/atom+xml"><link rel="stylesheet" href="/css/main.css?v=1.29.1"><link rel="shortcut icon" href="/asset/favicon.svg"><link rel="stylesheet" href="https://raw.weekdaycare.cn/font/result.css" media="only x" onload='this.onload=null,this.media="all"'><script defer src="/sw-dom.js"></script></head><body><div class="l_body s:aa content tech" id="start" layout="post"><aside class="l_left"><div class="leftbar-container"><header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><img no-lazy class="avatar" src="/asset/avatar.svg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">星日语</div><div class="sub normal cap">妳只是靜靜的坐著</div><div class="sub hover cap" style="opacity:0">卻撥動我所有的情緒</div></a><div id="search-button"><a class="search-button" onclick="sidebar.dismiss()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M11.5 7a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-.82 4.74a6 6 0 1 1 1.06-1.06l2.79 2.79a.75.75 0 1 1-1.06 1.06z" clip-rule="evenodd"/></svg></a></div></div></header><div class="nav-area"><nav class="menu dis-select"><a class="nav-item active" title="日光" href="/" style="color:var(--text)"><span>日光</span></a><a class="nav-item" title="月辉" href="/shuoshuo/" style="color:var(--text)"><span>月辉</span></a><a class="nav-item" title="星海" href="/about/" style="color:var(--text)"><span>星海</span></a></nav></div><div class="widgets"><widget class="widget-wrapper slide-up post-list"><div class="widget-header dis-select"><span class="name">最近开荒</span><a class="cap-action" id="rss" title="Subscribe" href="/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M5 21q-.825 0-1.412-.587T3 19q0-.825.588-1.412T5 17q.825 0 1.413.588T7 19q0 .825-.587 1.413T5 21m13.5 0q-.65 0-1.088-.475T16.9 19.4q-.275-2.425-1.312-4.537T12.9 11.1q-1.65-1.65-3.762-2.687T4.6 7.1q-.65-.075-1.125-.512T3 5.5q0-.65.45-1.062t1.075-.363q3.075.275 5.763 1.563t4.737 3.337q2.05 2.05 3.338 4.738t1.562 5.762q.05.625-.363 1.075T18.5 21m-6 0q-.625 0-1.075-.437T10.85 19.5q-.225-1.225-.787-2.262T8.65 15.35q-.85-.85-1.888-1.412T4.5 13.15q-.625-.125-1.062-.575T3 11.5q0-.65.45-1.075t1.075-.325q1.825.25 3.413 1.063t2.837 2.062q1.25 1.25 2.063 2.838t1.062 3.412q.1.625-.325 1.075T12.5 21"/></svg></a></div><div class="widget-body fs14"><a class="item title" href="/posts/for-dog/"><span class="title">村里的狗</span></a><a class="item title" href="/posts/2025/"><span class="title">所以，晚上吃什么？</span></a><a class="item title" href="/posts/twikoo-new/"><span class="title">Stellar展示最新评论</span></a><a class="item title" href="/posts/my-grandpa/"><span class="title">泪总不在当下流</span></a><a class="item title" href="/posts/web-live/"><span class="title">iOS实况live图标签</span></a></div></widget></div><footer class="footer dis-select"><div class="theme-switch"><button class="switch-item" data-theme="light" onclick="switchTolight()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M12 5q-.425 0-.712-.288T11 4V2q0-.425.288-.712T12 1t.713.288T13 2v2q0 .425-.288.713T12 5m4.95 2.05q-.275-.275-.275-.687t.275-.713l1.4-1.425q.3-.3.712-.3t.713.3q.275.275.275.7t-.275.7L18.35 7.05q-.275.275-.7.275t-.7-.275M20 13q-.425 0-.713-.288T19 12t.288-.712T20 11h2q.425 0 .713.288T23 12t-.288.713T22 13zm-8 10q-.425 0-.712-.288T11 22v-2q0-.425.288-.712T12 19t.713.288T13 20v2q0 .425-.288.713T12 23M5.65 7.05l-1.425-1.4q-.3-.3-.3-.725t.3-.7q.275-.275.7-.275t.7.275L7.05 5.65q.275.275.275.7t-.275.7q-.3.275-.7.275t-.7-.275m12.7 12.725l-1.4-1.425q-.275-.3-.275-.712t.275-.688t.688-.275t.712.275l1.425 1.4q.3.275.288.7t-.288.725q-.3.3-.725.3t-.7-.3M2 13q-.425 0-.712-.288T1 12t.288-.712T2 11h2q.425 0 .713.288T5 12t-.288.713T4 13zm2.225 6.775q-.275-.275-.275-.7t.275-.7L5.65 16.95q.275-.275.687-.275t.713.275q.3.3.3.713t-.3.712l-1.4 1.4q-.3.3-.725.3t-.7-.3M12 18q-2.5 0-4.25-1.75T6 12t1.75-4.25T12 6t4.25 1.75T18 12t-1.75 4.25T12 18m0-2q1.65 0 2.825-1.175T16 12t-1.175-2.825T12 8T9.175 9.175T8 12t1.175 2.825T12 16m0-4"/></svg></button><button class="switch-item" data-theme="auto" onclick="switchTosystem()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M2 5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2h-7v2h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h3v-2H4a2 2 0 0 1-2-2zm18 11V5H4v11z"/></svg></button><button class="switch-item" data-theme="dark" onclick="switchTodark()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21q-3.775 0-6.387-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.325-.05.575.088t.4.362t.163.525t-.188.575q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.275-.175.563-.162t.512.137q.25.125.388.375t.087.6q-.35 3.45-2.937 5.725T12 21m0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19m-.25-6.75"/></svg></button></div></footer></div></aside><div class="l_main" id="main"><div class="article banner top"><div class="content"><div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a> <span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/">奇技淫巧</a></div><div class="flex-row" id="post-meta"><span class="text created">发布于：<time datetime="2022-06-28T13:14:05.000Z">2022-06-28</time></span><span class="sep updated"></span><span class="text updated">更新于：<time datetime="2022-06-30T14:00:00.000Z">2022-06-30</time></span></div><div class="flex-row" id="post-wordcount"><span class="text word-count">字数：2.1k 字</span><span class="sep"></span><span class="text read-time">时长：7 分钟</span></div></div></div><div class="bottom only-title"><div class="text-area"><h1 class="text title"><span>轻量云服务期搭建Ondrive离线下载</span></h1></div></div></div></div><article class="md-text content slide-up"><p>本文使用的是腾讯云的轻量应用服务器</p><h2 id="系统">系统</h2><p><code>CentOS 7.6</code></p><h2 id="ARIA2">ARIA2</h2><p>直接使用github大佬的<code>aria2</code><a target="_blank" rel="noopener" href="https://github.com/P3TERX/aria2.sh">增强脚本</a>，提速超级明显</p><div class="tag-plugin copy"><input class="copy-area" id="copy_1" value="wget -N http://git.io/aria2.sh && chmod +x aria2.sh"><button class="copy-btn" onclick="util.copy(&quot;copy_1&quot;,&quot;复制成功( •̀ ω •́ )✧&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><p>上面的代码大概率无法下载，因为服务器被墙了，连不上<code>Github</code></p><details class="tag-plugin colorful folding" color="light"><summary><p>可以使用下面的代码 codeblock:true</p></summary><div class="body"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/P3TERX/aria2.sh/master/aria2.sh &amp;&amp; <span class="built_in">chmod</span> +x aria2.sh &amp;&amp; bash aria2.sh</span><br></pre></td></tr></table></figure></div></details><details class="tag-plugin colorful folding"><summary><p>或者配置hosts文件 codeblock:false</p></summary><div class="body"><p>方法如下</p><p>进入该网址查询<code>git.io</code>的<code>ip</code>地址</p><p><a target="_blank" rel="noopener" href="https://ping.chinaz.com/git.io">多个地点ping [git.io]服务器-网站测速-站长工具 (chinaz.com)</a></p><p>查询到可用的<code>ip</code>地址后复制进入服务器控制台</p><p><code>cd</code>到根目录，使用<code>vim</code>命令</p><div class="tag-plugin copy"><input class="copy-area" id="copy_2" value="vim /etc/hosts"><button class="copy-btn" onclick="util.copy(&quot;copy_2&quot;,&quot;复制成功( •̀ ω •́ )✧&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><p>按<code>i</code>进入编辑，格式如下</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">140.82.114.22 git.io</span><br><span class="line">140.82.112.4 github.com</span><br><span class="line">185.199.108.133 raw.githubusercontent.com</span><br></pre></td></tr></table></figure><p>编辑完成后按<code>Esc</code>并键入<code>:wq</code>保存退出</p><p>再次尝试</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -N http://git.io/aria2.sh &amp;&amp; <span class="built_in">chmod</span> +x aria2.sh</span><br></pre></td></tr></table></figure></div></details><p>完成之后会看到如下代码</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Aria2 一键安装管理脚本 增强版 [v2.7.4] by P3TERX.COM</span><br><span class="line"></span><br><span class="line">  0. 升级脚本</span><br><span class="line"> ———————————————————————</span><br><span class="line">  1. 安装 Aria2</span><br><span class="line">  2. 更新 Aria2</span><br><span class="line">  3. 卸载 Aria2</span><br><span class="line"> ———————————————————————</span><br><span class="line">  4. 启动 Aria2</span><br><span class="line">  5. 停止 Aria2</span><br><span class="line">  6. 重启 Aria2</span><br><span class="line"> ———————————————————————</span><br><span class="line">  7. 修改 配置</span><br><span class="line">  8. 查看 配置</span><br><span class="line">  9. 查看 日志</span><br><span class="line"> 10. 清空 日志</span><br><span class="line"> ———————————————————————</span><br><span class="line"> 11. 手动更新 BT-Tracker</span><br><span class="line"> 12. 自动更新 BT-Tracker</span><br><span class="line"> ———————————————————————</span><br></pre></td></tr></table></figure><p>按<code>1</code>安装<code>Aria2</code><br>安装完成后输入<code>./aria2.sh</code>再次进入该界面输入<code>8</code>查看配置如下</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Aria2 简单配置信息：</span><br><span class="line"></span><br><span class="line"> IPv4 地址      : #############</span><br><span class="line"> IPv6 地址      : #############</span><br><span class="line"> RPC 端口       : ####</span><br><span class="line"> RPC 密钥       : ##############</span><br><span class="line"> 下载目录       : ##########</span><br><span class="line"> AriaNg 链接    : http://ariang.js.org/#!/settings/rpc/set/###########</span><br></pre></td></tr></table></figure><p>记住<code>RPC端口</code>，在服务器防火墙中将改端口设为允许，复制<code>RPC密钥</code></p><p>复制<code>AriaNg</code>链接并在浏览器中打开，进入侧边栏<code>AriaNg设置</code>，上边全局旁边有个<code>PRC:你的ip:6800</code>，点进去，将你复制的<code>RPC密钥</code>粘贴到<code>Aria RPC 密钥</code>中，重载<code>Aria2</code>完成</p><p>以后想要运行脚本只需输入以下代码：</p><div class="tag-plugin copy"><input class="copy-area" id="copy_3" value="./aria2.sh"><button class="copy-btn" onclick="util.copy(&quot;copy_3&quot;,&quot;复制成功( •̀ ω •́ )✧&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><h2 id="上传">上传</h2><h3 id="安装Rclone">安装Rclone</h3><p>上传我们使用<code>Rclone</code></p><p>服务器控制台执行</p><div class="tag-plugin copy"><input class="copy-area" id="copy_4" value="width:max curl https://rclone.org/install.sh | sudo bash"><button class="copy-btn" onclick="util.copy(&quot;copy_4&quot;,&quot;复制成功( •̀ ω •́ )✧&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><p>时间有一点长，等就完了，趁服务器安装的时间，我们获取<code>OneDrive</code>的<code>Token</code></p><h3 id="获取Token">获取Token</h3><p>在<strong>自己Windows</strong>电脑上下载<code>Rclone</code>，<code>Rclone</code>官网:<a target="_blank" rel="noopener" href="https://rclone.org/downloads/">https://rclone.org/downloads/</a></p><p>下载完之后解压到你熟悉的文件夹，然后打开<code>CMD</code>，用<code>cd</code>命令进入刚刚解压的文件夹</p><p>执行以下命令，注意不要关掉<code>CMD</code>窗口</p><div class="tag-plugin colorful note" color="light"><div class="body"><p>rclone authorize “onedrive”</p></div></div><p>会自动弹出浏览器让你登录<code>OneDrive</code>，登录授权，回到<code>CMD</code>窗口，会出现如下内容</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">NOTICE: If your browser doesn<span class="string">&#x27;t open automatically go to the following link: http://127.0.0.1:53682/auth?state=viTI1hvSD4t3spt6rsmmpQ</span></span><br><span class="line"><span class="string">NOTICE: Log in and authorize rclone for access</span></span><br><span class="line"><span class="string">NOTICE: Waiting for code...</span></span><br><span class="line"><span class="string">NOTICE: Got code</span></span><br><span class="line"><span class="string">Paste the following into your remote machine ---&gt;</span></span><br><span class="line"><span class="string">&#123;&quot;access_token&quot;:&quot;#############################&quot;&#125;</span></span><br><span class="line"><span class="string">&lt;---End paste</span></span><br></pre></td></tr></table></figure><p>注意：复制<mark class="tag-plugin colorful mark" color="red">{access_token:###########}</mark>整段内容，保存好，后面要用</p><h3 id="配置Rclone">配置Rclone</h3><p>服务器控制台输入<code>rclone config</code>命令</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@VM-16-14-centos lighthouse]# rclone config</span><br><span class="line">2022/08/07 19:36:33 NOTICE: Config file <span class="string">&quot;/root/.config/rclone/rclone.conf&quot;</span> not found - using defaults</span><br><span class="line">No remotes found, make a new one?</span><br><span class="line">n) New remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">n/s/q&gt; n   <span class="comment">#选n新建</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nter name <span class="keyword">for</span> new remote.</span><br><span class="line">name&gt; onedrive <span class="comment">#取个名字，随意ok</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Option Storage.</span><br><span class="line">Type of storage to configure.</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> your own value.</span><br><span class="line"> 1 / 1Fichier</span><br><span class="line">   \ (fichier)</span><br><span class="line"> 2 / Akamai NetStorage</span><br><span class="line">   \ (netstorage)</span><br><span class="line"> 3 / Alias <span class="keyword">for</span> an existing remote</span><br><span class="line">   \ (<span class="built_in">alias</span>)</span><br><span class="line"> 4 / Amazon Drive</span><br><span class="line">   \ (amazon cloud drive)</span><br><span class="line"> 5 / Amazon S3 Compliant Storage Providers including AWS, Alibaba, Ceph, China Mobile, Cloudflare, ArvanCloud, Digital Ocean, Dreamhost, Huawei OBS, IBM COS, IDrive e2, Lyve Cloud, Minio, Netease, RackCorp, Scaleway, SeaweedFS, StackPath, Storj, Tencent COS and Wasabi</span><br><span class="line">   \ (s3)</span><br><span class="line"> 6 / Backblaze B2</span><br><span class="line">   \ (b2)</span><br><span class="line"> 7 / Better checksums <span class="keyword">for</span> other remotes</span><br><span class="line">   \ (hasher)</span><br><span class="line"> 8 / Box</span><br><span class="line">   \ (box)</span><br><span class="line"> 9 / Cache a remote</span><br><span class="line">   \ (cache)</span><br><span class="line">10 / Citrix Sharefile</span><br><span class="line">   \ (sharefile)</span><br><span class="line">11 / Combine several remotes into one</span><br><span class="line">   \ (combine)</span><br><span class="line">12 / Compress a remote</span><br><span class="line">   \ (compress)</span><br><span class="line">13 / Dropbox</span><br><span class="line">   \ (dropbox)</span><br><span class="line">14 / Encrypt/Decrypt a remote</span><br><span class="line">   \ (crypt)</span><br><span class="line">15 / Enterprise File Fabric</span><br><span class="line">   \ (filefabric)</span><br><span class="line">16 / FTP</span><br><span class="line">   \ (ftp)</span><br><span class="line">17 / Google Cloud Storage (this is not Google Drive)</span><br><span class="line">   \ (google cloud storage)</span><br><span class="line">18 / Google Drive</span><br><span class="line">   \ (drive)</span><br><span class="line">19 / Google Photos</span><br><span class="line">   \ (google photos)</span><br><span class="line">20 / HTTP</span><br><span class="line">   \ (http)</span><br><span class="line">21 / Hadoop distributed file system</span><br><span class="line">   \ (hdfs)</span><br><span class="line">22 / HiDrive</span><br><span class="line">   \ (hidrive)</span><br><span class="line">23 / Hubic</span><br><span class="line">   \ (hubic)</span><br><span class="line">24 / In memory object storage system.</span><br><span class="line">   \ (memory)</span><br><span class="line">25 / Internet Archive</span><br><span class="line">   \ (internetarchive)</span><br><span class="line">26 / Jottacloud</span><br><span class="line">   \ (jottacloud)</span><br><span class="line">27 / Koofr, Digi Storage and other Koofr-compatible storage providers</span><br><span class="line">   \ (koofr)</span><br><span class="line">28 / Local Disk</span><br><span class="line">   \ (<span class="built_in">local</span>)</span><br><span class="line">29 / Mail.ru Cloud</span><br><span class="line">   \ (mailru)</span><br><span class="line">30 / Mega</span><br><span class="line">   \ (mega)</span><br><span class="line">31 / Microsoft Azure Blob Storage</span><br><span class="line">   \ (azureblob)</span><br><span class="line">32 / Microsoft OneDrive</span><br><span class="line">   \ (onedrive)</span><br><span class="line">33 / OpenDrive</span><br><span class="line">   \ (opendrive)</span><br><span class="line">34 / OpenStack Swift (Rackspace Cloud Files, Memset Memstore, OVH)</span><br><span class="line">   \ (swift)</span><br><span class="line">35 / Pcloud</span><br><span class="line">   \ (pcloud)</span><br><span class="line">36 / Put.io</span><br><span class="line">   \ (putio)</span><br><span class="line">37 / QingCloud Object Storage</span><br><span class="line">   \ (qingstor)</span><br><span class="line">38 / SSH/SFTP</span><br><span class="line">   \ (sftp)</span><br><span class="line">39 / Sia Decentralized Cloud</span><br><span class="line">   \ (sia)</span><br><span class="line">40 / Storj Decentralized Cloud Storage</span><br><span class="line">   \ (storj)</span><br><span class="line">41 / Sugarsync</span><br><span class="line">   \ (sugarsync)</span><br><span class="line">42 / Transparently chunk/split large files</span><br><span class="line">   \ (chunker)</span><br><span class="line">43 / Union merges the contents of several upstream fs</span><br><span class="line">   \ (union)</span><br><span class="line">44 / Uptobox</span><br><span class="line">   \ (uptobox)</span><br><span class="line">45 / WebDAV</span><br><span class="line">   \ (webdav)</span><br><span class="line">46 / Yandex Disk</span><br><span class="line">   \ (yandex)</span><br><span class="line">47 / Zoho</span><br><span class="line">   \ (zoho)</span><br><span class="line">48 / premiumize.me</span><br><span class="line">   \ (premiumizeme)</span><br><span class="line">49 / seafile</span><br><span class="line">   \ (seafile)</span><br><span class="line">Storage&gt; 32 <span class="comment">#选择Microsoft OneDrive（不同版本的Rclone这里的数字可能稍有不同，注意看清）</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Option client_id.</span><br><span class="line">OAuth Client Id.</span><br><span class="line">Leave blank normally.</span><br><span class="line">Enter a value. Press Enter to leave empty.</span><br><span class="line">client_id&gt;  <span class="comment">#留空，直接回车</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Option client_secret.</span><br><span class="line">OAuth Client Secret.</span><br><span class="line">Leave blank normally.</span><br><span class="line">Enter a value. Press Enter to leave empty.</span><br><span class="line">client_secret&gt;  <span class="comment">#同样留空回车</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Option region.</span><br><span class="line">Choose national cloud region <span class="keyword">for</span> OneDrive.</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> your own string value.</span><br><span class="line">Press Enter <span class="keyword">for</span> the default (global).</span><br><span class="line"> 1 / Microsoft Cloud Global</span><br><span class="line">   \ (global)</span><br><span class="line"> 2 / Microsoft Cloud <span class="keyword">for</span> US Government</span><br><span class="line">   \ (us)</span><br><span class="line"> 3 / Microsoft Cloud Germany</span><br><span class="line">   \ (de)</span><br><span class="line"> 4 / Azure and Office 365 operated by 21Vianet <span class="keyword">in</span> China <span class="comment">#世纪互联</span></span><br><span class="line">   \ (cn)</span><br><span class="line">region&gt; 1 <span class="comment">#这里是选择OneDrive的版本，我的是E5的网盘，选择Global</span></span><br></pre></td></tr></table></figure><details class="tag-plugin colorful folding" color="yellow"><summary><p>个人账户与世纪互联区分方法</p></summary><div class="body"><ul><li><p>微软登录入口<br>微软个人账户和全球账户可以在 <a target="_blank" rel="noopener" href="https://www.office.com/">https://www.office.com</a><br>而世纪互联账户则不可以在这个登录入口登录。</p></li><li><p>世纪互联登录入口<br>而世纪互联账户则只能在 <a target="_blank" rel="noopener" href="https://portal.partner.microsoftonline.cn/">世纪互联登录入口</a> 这里登录。<br>微软个人账户和全球账户则登录不了这个入口。</p></li></ul></div></details><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Edit advanced config?</span><br><span class="line">y) Yes</span><br><span class="line">n) No (default)</span><br><span class="line">y/n&gt; n <span class="comment">#留空回车</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Use auto config?</span><br><span class="line"> * Say Y <span class="keyword">if</span> not sure</span><br><span class="line"> * Say N <span class="keyword">if</span> you are working on a remote or headless machine</span><br><span class="line"></span><br><span class="line">y) Yes (default)</span><br><span class="line">n) No</span><br><span class="line">y/n&gt; n <span class="comment">#这里手动选择n</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Option config_token.</span><br><span class="line">For this to work, you will need rclone available on a machine that has</span><br><span class="line">a web browser available.</span><br><span class="line">For more <span class="built_in">help</span> and alternate methods see: https://rclone.org/remote_setup/</span><br><span class="line">Execute the following on the machine with the web browser (same rclone</span><br><span class="line">version recommended):</span><br><span class="line">        rclone authorize <span class="string">&quot;onedrive&quot;</span></span><br><span class="line">Then <span class="built_in">paste</span> the result.</span><br><span class="line">Enter a value.</span><br><span class="line">config_token&gt; &#123;<span class="string">&quot;access_token&quot;</span>:<span class="string">&quot;##########&quot;</span>&#125; <span class="comment">#粘贴之前保存的信息</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Option config_type.</span><br><span class="line">Type of connection</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> an existing string value.</span><br><span class="line">Press Enter <span class="keyword">for</span> the default (onedrive).</span><br><span class="line"> 1 / OneDrive Personal or Business</span><br><span class="line">   \ (onedrive)</span><br><span class="line"> 2 / Root Sharepoint site</span><br><span class="line">   \ (sharepoint)</span><br><span class="line">   / Sharepoint site name or URL</span><br><span class="line"> 3 | E.g. mysite or https://contoso.sharepoint.com/sites/mysite</span><br><span class="line">   \ (url)</span><br><span class="line"> 4 / Search <span class="keyword">for</span> a Sharepoint site</span><br><span class="line">   \ (search)</span><br><span class="line"> 5 / Type <span class="keyword">in</span> driveID (advanced)</span><br><span class="line">   \ (driveid)</span><br><span class="line"> 6 / Type <span class="keyword">in</span> SiteID (advanced)</span><br><span class="line">   \ (siteid)</span><br><span class="line">   / Sharepoint server-relative path (advanced)</span><br><span class="line"> 7 | E.g. /teams/hr</span><br><span class="line">   \ (path)</span><br><span class="line">config_type&gt; 1 <span class="comment">#E5账号属于商业版，根据自己情况选择</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Option config_driveid.</span><br><span class="line">Select drive you want to use</span><br><span class="line">Choose a number from below, or <span class="built_in">type</span> <span class="keyword">in</span> your own string value.</span><br><span class="line">Press Enter <span class="keyword">for</span> the default (8888888888888888888888888888888888888888888888888).</span><br><span class="line"> 1 / OneDrive (business)</span><br><span class="line">   \ (8888888888888888888888888888888888888888888888888)</span><br><span class="line">config_driveid&gt; 1 <span class="comment">#这里是Rclone找到的网盘信息，这里出现什么选什么</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Found drive <span class="string">&quot;root&quot;</span> of <span class="built_in">type</span> <span class="string">&quot;business&quot;</span></span><br><span class="line">URL: https://888888 <span class="comment">#这里是你自己的URL</span></span><br><span class="line"></span><br><span class="line">y) Yes (default)</span><br><span class="line">n) No</span><br><span class="line">y/n&gt; y <span class="comment">#选y</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Configuration complete.</span><br><span class="line">Options:</span><br><span class="line">- <span class="built_in">type</span>: onedrive</span><br><span class="line">- token: &#123;<span class="string">&quot;access_token&quot;</span>:<span class="string">&quot;#############&quot;</span>&#125;</span><br><span class="line">- drive_id: <span class="comment">#########</span></span><br><span class="line">- drive_type: business</span><br><span class="line">Keep this <span class="string">&quot;onedrive&quot;</span> remote?</span><br><span class="line">y) Yes this is OK (default)</span><br><span class="line">e) Edit this remote</span><br><span class="line">d) Delete this remote</span><br><span class="line">y/e/d&gt; y <span class="comment">#选y</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Current remotes:</span><br><span class="line"></span><br><span class="line">Name                 Type</span><br><span class="line">====                 ====</span><br><span class="line">onedrive             onedrive  <span class="comment">#出现这个就完成了</span></span><br><span class="line"></span><br><span class="line">e) Edit existing remote</span><br><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) Rename remote</span><br><span class="line">c) Copy remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">e/n/d/r/c/s/q&gt; q <span class="comment">#q退出</span></span><br></pre></td></tr></table></figure><p>现在<code>Rclone</code>已经连接上<code>OneDrive</code>了</p><h3 id="配置上传脚本">配置上传脚本</h3><p>打开<code>/root/.aria2c/script.conf</code>配置文件进行修改，有中文注释，自行修改，一般只需要修改下面2个部分</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 网盘名称(RCLONE 配置时填写的 name)</span></span><br><span class="line">drive-name=onedrive</span><br><span class="line"></span><br><span class="line"><span class="comment"># 网盘目录(上传目标目录，网盘中的文件夹路径)。注释或留空为网盘根目录，末尾不要有斜杠。</span></span><br><span class="line"><span class="comment">#drive-dir=/DRIVEX/Download</span></span><br></pre></td></tr></table></figure><p>打开<code>/root/.aria2c/aria2.conf</code>配置文件进行修改。或使用<code>Aria2</code> 一键安装管理脚本中的手动修改选项打开配置文件进行修改。找到“下载完成后执行的命令”，把<code>clean.sh</code>替换为<code>upload.sh</code>。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载完成后执行的命令</span></span><br><span class="line"><span class="comment"># 此项未定义则执行 下载停止后执行的命令 (on-download-stop)</span></span><br><span class="line">on-download-complete=/root/.aria2c/upload.sh</span><br></pre></td></tr></table></figure><p>在配置<code>aria2c</code>时，注意有一个<code>BT/PT下载设置</code>，在腾讯云控制台防火墙中添加BT/PT监听端口的规则（不下BT/PT的可以忽略）</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## BT/PT 下载设置 ##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># BT 监听端口(TCP), 默认:6881-6999   //就是这个</span></span><br><span class="line"><span class="comment"># 直通外网的设备，比如 VPS ，务必配置防火墙和安全组策略允许此端口入站</span></span><br><span class="line"><span class="comment"># 内网环境的设备，比如 NAS ，除了防火墙设置，还需在路由器设置外网端口转发到此端口</span></span><br></pre></td></tr></table></figure><p>搞完重启使用<code>Aria2</code>脚本重启<code>Aria2</code></p><div class="tag-plugin copy"><input class="copy-area" id="copy_5" value="./aria2.sh"><button class="copy-btn" onclick="util.copy(&quot;copy_5&quot;,&quot;复制成功( •̀ ω •́ )✧&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><p>至此完成！现在可以好好享受离线下载啦！</p><div class="article-footer slide-up fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p><a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-ND 4.0</a> 若你喜欢我的文章欢迎互动，玩的愉快！</p></div></section></div></article><div class="related-wrap slide-up" id="read-next"><section class="body"><a class="item" id="prev" href="/posts/cloudflare-pages/"><div class="note">上一站</div>部署 Hexo 于 Cloudflare Pages</a><a class="item" id="next" href="/posts/rss/"><div class="note">下一站</div>RSS</a></section></div><div class="related-wrap md-text slide-up" id="comments"><section class="header cmt-title cap theme"><p>来即是客，坐坐坐坐~</p></section><section class="body cmt-body twikoo"><div id="twikoo_container"><svg class="loading" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div></section></div><footer class="page-footer slide-up footnote"><hr><div class="text"><center><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">陕ICP备2022011813</a> | 由<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank">又拍云</a>提供CDN加速 | 基于 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题<br><a href="https://www.foreverblog.cn/go.html" target="_blank"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://img.foreverblog.cn/wormhole_4_tp.gif" alt="十年之约" style="width:auto;height:24px" title="穿梭虫洞-随机访问十年之约友链博客"></a></center></div></footer><div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right"><div class="widgets"><widget class="widget-wrapper slide-up toc" id="data-toc" collapse="true"><div class="widget-header dis-select"><span class="name">本文目录</span><a class="cap-action" onclick="sidebar.toggleTOC()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M15 3.5v17M10 15l-3-3l3-3"/><path d="M3 9.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C6.04 3 7.16 3 9.4 3h5.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C21 6.04 21 7.16 21 9.4v5.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C17.96 21 16.84 21 14.6 21H9.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C3 17.96 3 16.84 3 14.6z"/></g></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ARIA2"><span class="toc-number">2.</span> <span class="toc-text">ARIA2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0"><span class="toc-number">3.</span> <span class="toc-text">上传</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Rclone"><span class="toc-number">3.1.</span> <span class="toc-text">安装Rclone</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96Token"><span class="toc-number">3.2.</span> <span class="toc-text">获取Token</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AERclone"><span class="toc-number">3.3.</span> <span class="toc-text">配置Rclone</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%8A%E4%BC%A0%E8%84%9A%E6%9C%AC"><span class="toc-number">3.4.</span> <span class="toc-text">配置上传脚本</span></a></li></ol></li></ol></div></widget></div></aside><div class="float-panel"><button type="button" style="display:block" class="button-toggle mobile" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="m8.5 13.25l3.5-3.5l3.5 3.5"/><path d="M3 9.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C6.04 3 7.16 3 9.4 3h5.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C21 6.04 21 7.16 21 9.4v5.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C17.96 21 16.84 21 14.6 21H9.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C3 17.96 3 16.84 3 14.6z"/></g></svg></button> <button type="button" style="display:none" class="mobile-only leftbar-toggle mobile" onclick="sidebar.leftbar()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M9 3.5v17M14 9l3 3l-3 3"/><path d="M3 9.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C6.04 3 7.16 3 9.4 3h5.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C21 6.04 21 7.16 21 9.4v5.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C17.96 21 16.84 21 14.6 21H9.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C3 17.96 3 16.84 3 14.6z"/></g></svg></button> <button type="button" style="display:none" class="laptop-only rightbar-toggle mobile" onclick="sidebar.rightbar()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M15 3.5v17M10 15l-3-3l3-3"/><path d="M3 9.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C6.04 3 7.16 3 9.4 3h5.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C21 6.04 21 7.16 21 9.4v5.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C17.96 21 16.84 21 14.6 21H9.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C3 17.96 3 16.84 3 14.6z"/></g></svg></button> <button type="button" style="display:block" class="button-toggle mobile" onclick="util.scrollComment()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 9h8m-8 4h6m-5 5H6a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3h-3l-3 3z"/></svg></button></div></div><div id="search-mask" class="search-mask"></div><div class="search-wrapper" id="search-wrapper"><div class="search-header"><span class="search-title">搜索</span><a class="search-close-button" id="search-close"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="m12 13.4l-4.9 4.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.9-4.9l-4.9-4.9q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.9 4.9l4.9-4.9q.275-.275.7-.275t.7.275t.275.7t-.275.7L13.4 12l4.9 4.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"/></svg></a></div><form class="search-form"><input type="text" class="search-input" id="search-input" placeholder="Power by Algolia"><a class="search-close-button" id="search-clear"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="m12 13.4l-4.9 4.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.9-4.9l-4.9-4.9q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.9 4.9l4.9-4.9q.275-.275.7-.275t.7.275t.275.7t-.275.7L13.4 12l4.9 4.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"/></svg></a></form><div id="search-result"></div><div class="search-no-result">空空如也</div></div><div class="scripts"><script>let ctx={date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前"},root:"/",tag_plugins:{chat:Object.assign({api:"https://siteinfo.listentothewind.cn/api/v1"})},search:{}};if(ctx.search.service="algolia_search","local_search"==ctx.search.service){let e=Object.assign({},'{"field":"all","path":"/search.json","content":true,"skip_search":["shuoshuo*","about*"]}');ctx.search[ctx.search.service]=e}let def={avatar:"https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg",cover:"https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg"},deps={jquery:"https://s4.zstatic.net/ajax/libs/jquery/3.7.1/jquery.min.js",marked:"https://s4.zstatic.net/ajax/libs/marked/14.1.2/marked.min.js"}</script><script>function RunItem(){function n(e,t){this.name=t||e.name,this.run=()=>{try{e()}catch(e){console.log(e)}}}this.list=[],this.start=()=>{for(var e=0;e<this.list.length;e++)this.list[e].run()},this.push=(e,t,r=!0)=>{let s=e,i=new n(s=r?()=>{utils.requestAnimationFrame(e)}:s,t);this.list.push(i)},this.remove=t=>{for(let e=0;e<this.list.length;e++)this.list[e].name==t&&this.list.splice(e,1)}}let utils={css:(e,t,r,s)=>{var i,n,a=window.document,o=a.createElement("link"),d=(n=t||(i=(a.body||a.getElementsByTagName("head")[0]).childNodes)[i.length-1],a.styleSheets);if(s)for(var l in s)s.hasOwnProperty(l)&&o.setAttribute(l,s[l]);o.rel="stylesheet",o.href=e,o.media="only x",function e(t){if(a.body)return t();setTimeout(function(){e(t)})}(function(){n.parentNode.insertBefore(o,t?n:n.nextSibling)});function u(e){for(var t=o.href,r=d.length;r--;)if(d[r].href===t)return e();setTimeout(function(){u(e)})}function h(){o.addEventListener&&o.removeEventListener("load",h),o.media=r||"all"}return o.addEventListener&&o.addEventListener("load",h),o.onloadcssdefined=u,u(h),o},js:(i,n)=>new Promise((t,e)=>{var r=document.createElement("script");if(i.startsWith("/")&&(i=ctx.root+i.substring(1)),r.src=i,n)for(var s of Object.keys(n))r[s]=n[s];else r.async=!0;r.onerror=e,r.onload=r.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,t())},document.head.appendChild(r)}),jq:e=>{"undefined"==typeof jQuery?utils.js(deps.jquery).then(e):e()},onLoading:e=>{e&&$(e).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>')},onLoadSuccess:e=>{e&&$(e).find(".loading-wrap").remove()},onLoadFailure:e=>{e&&($(e).find(".loading-wrap svg").remove(),$(e).find(".loading-wrap").append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>'),$(e).find(".loading-wrap").addClass("error"))},request:(n,a,o,d)=>{let l=3;utils.onLoading(n),function i(){new Promise((t,e)=>{let r=0,s=setTimeout(()=>{0===r&&(r=2,s=null,e("请求超时"),0==l)&&d()},5e3);fetch(a).then(function(e){if(2!==r&&(clearTimeout(s),t(e),s=null,r=1),e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){l=0,utils.onLoadSuccess(n),o(e)}).catch(function(e){0<l?(--l,setTimeout(()=>{i()},5e3)):(utils.onLoadFailure(n),d())})})}()},requestAnimationFrame:e=>{window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame),window.requestAnimationFrame(e)},dark:{}};utils.dark.method={toggle:new RunItem},utils.dark=Object.assign(utils.dark,{push:utils.dark.method.toggle.push})</script><script>let sidebar={leftbar:()=>{l_body&&(l_body.toggleAttribute("leftbar"),l_body.removeAttribute("rightbar"))},rightbar:()=>{l_body&&(l_body.toggleAttribute("rightbar"),l_body.removeAttribute("leftbar"))},dismiss:()=>{l_body&&(l_body.removeAttribute("leftbar"),l_body.removeAttribute("rightbar"))},toggleTOC:()=>{document.querySelector("#data-toc").classList.toggle("collapse")}}</script><script>(()=>{var e;for(e of document.querySelectorAll(".tag-subtree.parent-tag > a > .tag-switcher-wrapper"))e.addEventListener("click",e=>{e.target.closest(".tag-subtree.parent-tag").classList.toggle("expanded"),e.preventDefault()});var t=new URLSearchParams(window.location.search).get("tag");if(t){let e=document.querySelector(`.tag-subtree[data-tag="${t}"]`);if(e)for(e.querySelector("a").classList.add("active");e;)e.classList.add("expanded"),e=e.parentElement.closest(".tag-subtree.parent-tag")}})()</script><script src="/js/main.js?v=1.29.1" defer></script><script>let applyTheme=e=>{"auto"===e?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",e),applyThemeToGiscus(e)},applyThemeToGiscus=e=>{e="auto"===e?"preferred_color_scheme":e;var t=document.getElementById("giscus"),t=(t&&t.setAttribute("data-theme",e),document.querySelector("#comments > section.giscus > iframe"));t&&(e=t.src.replace(/theme=[\w]+/,"theme="+e),t.src=e)},switchTheme=e=>{applyTheme(e),window.localStorage.setItem("Stellar.theme",e),hud?.toast?.({light:"白昼",dark:"黑夜",auto:"自转"}[e])},switchTolight=()=>switchTheme("light"),switchTodark=()=>switchTheme("dark"),switchTosystem=()=>switchTheme("auto");(()=>{var e=window.localStorage.getItem("Stellar.theme");null!==e&&applyTheme(e)})()</script><script type="module">const el = document.getElementById('twikoo_container');
  util.viewportLazyload(el, load_twikoo, true);

  function load_twikoo() {
    if (!el) return;
    utils.js('https://s4.zstatic.net/npm/twikoo@1.6.44/dist/twikoo.min.js', {defer: true}).then(function () {
      const path = el.getAttribute('comment_id') ?? decodeURI(window.location.pathname);
      twikoo.init(Object.assign({"js":"https://s4.zstatic.net/npm/twikoo@1.6.44/dist/twikoo.min.js","envId":"https://comment.weekdaycare.cn"}, {
        el: '#twikoo_container',
        path: path,
      }));
    });
  }</script><script defer>window.addEventListener("DOMContentLoaded",e=>{ctx.services=Object.assign({},JSON.parse('{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":"https://raw.weekdaycare.cn/site/api/v1?url={href}"},"ghinfo":{"js":"/js/services/ghinfo.js"},"coding":{"js":"/js/services/coding.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"},"voice":{"js":"/js/plugins/voice.js"},"video":{"js":"/js/plugins/video.js"},"download-file":{"js":"/js/plugins/download-file.js"},"twikoo":{"js":"/js/services/twikoo_new.js"},"waline":{"js":"/js/services/waline_new.js"},"artalk":{"js":"/js/services/artalk_latest_comment.js"},"giscus":{"js":"/js/services/giscus_new.js"},"webinfo":{"js":"/js/services/webinfo.js"},"live":{"js":"https://cdn.apple-livephotoskit.com/lpk/1/livephotoskit.js"}}'));for(let s of Object.keys(ctx.services)){let e=ctx.services[s].js;"siteinfo"==s?(ctx.cardlinks=document.querySelectorAll("a.link-card[cardlink]"),0<ctx.cardlinks?.length&&utils.js(e,{defer:!0}).then(function(){setCardLink(ctx.cardlinks)})):"voice"==s?(ctx.voiceAudios=document.querySelectorAll(".voice>audio"),0<ctx.voiceAudios?.length&&utils.js(e,{defer:!0}).then(function(){createVoiceDom(ctx.voiceAudios)})):"video"==s?(ctx.videos=document.querySelectorAll(".video>video"),0<ctx.videos?.length&&utils.js(e,{defer:!0}).then(function(){videoEvents(ctx.videos)})):"download-file"==s?(ctx.files=document.querySelectorAll(".file"),0<ctx.files?.length&&utils.js(e,{defer:!0}).then(function(){downloadFileEvent(ctx.files)})):0<document.getElementsByClassName("ds-"+s)?.length&&utils.jq(()=>{s,utils.js(deps.marked).then(function(){utils.js(e,{defer:!0})})})}let n=document.querySelectorAll(".chat .status-bar .time");var s,t;function i(){for(let e=0;e<n.length;++e){var s=n[e],t=new Date,i=t.getHours(),t=t.getMinutes();s.innerHTML=o(i)+":"+o(t)}}function o(e){return e<10?"0"+e:e}0<n.length&&(i(),s=(new Date).getSeconds(),t=setInterval(function(){i(),clearInterval(t),setInterval(i,6e4)},1e3*(60-s)));let c=new IntersectionObserver((e,t)=>{e.filter(e=>e.isIntersecting).sort((e,s)=>e.intersectionRect.y!==s.intersectionRect.y?e.intersectionRect.y-s.intersectionRect.y:e.intersectionRect.x-s.intersectionRect.x).forEach((e,s)=>{t.unobserve(e.target),setTimeout(()=>{e.target.classList.add("quote-blink"),setTimeout(()=>{e.target.classList.remove("quote-blink")},1e3)},Math.max(100,16)*(s+1))})}),r=document.querySelectorAll(".chat .talk .quote");r.forEach(i=>{i.addEventListener("click",function(){var e,s,t=document.getElementById("quote-"+i.getAttribute("quotedCellTag"));t&&(s=(e=t.parentElement).clientHeight/2,t.offsetTop>s-t.clientHeight/2?e.scrollTo({top:t.offsetTop-s+t.clientHeight/2,behavior:"smooth"}):e.scrollTo({top:0,behavior:"smooth"}),c.observe(t))})})})</script><script>window.addEventListener("DOMContentLoaded",e=>{window.searchConfig={appId:"6KHRZIWYJC",apiKey:"f914eb4e95cd503d20c3fef0f62effcc",indexName:"weekdaycareio",js:"https://jsd.onmicrosoft.cn/algoliasearch/3/algoliasearch.min.js",hitsPerPage:30},utils.js("/js/search/algolia-search.js",{defer:!0})})</script><script>window.FPConfig={delay:0,ignoreKeywords:[],maxRPS:5,hoverDelay:25}</script><script defer src="https://jsd.onmicrosoft.cn/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script><script defer src="https://cdnjs.onmicrosoft.cn/ajax/libs/vanilla-lazyload/19.1.3/lazyload.min.js"></script><script>window.lazyLoadOptions={elements_selector:".lazy"},window.addEventListener("LazyLoad::Initialized",function(n){window.lazyLoadInstance=n.detail.instance},!1),document.addEventListener("DOMContentLoaded",function(){window.lazyLoadInstance?.update()})</script><script>ctx.fancybox={selector:'.tk-content img:not([class*="emo"])',css:"https://s4.zstatic.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css",js:"https://s4.zstatic.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"};var selector="[data-fancybox]:not(.error)",needFancybox=(ctx.fancybox.selector&&(selector+=", "+ctx.fancybox.selector),0!==document.querySelectorAll(selector).length);if(!needFancybox){let t=document.getElementsByClassName("ds-memos");null!=t&&0<t.length&&(needFancybox=!0)}needFancybox&&(utils.css(ctx.fancybox.css),utils.js(ctx.fancybox.js,{defer:!0}).then(function(){Fancybox.bind(selector,{hideScrollbar:!1,Thumbs:{autoStart:!1},caption:(t,e)=>e.triggerEl.alt||e.triggerEl.dataset.caption||null})}))</script><script>window.addEventListener("DOMContentLoaded",e=>{let i=document.getElementById("swiper-api");null!=i&&(utils.css("https://s4.zstatic.net/npm/swiper@11.1.14/swiper-bundle.min.css"),utils.js("https://s4.zstatic.net/npm/swiper@11.1.14/swiper-bundle.min.js",{defer:!0}).then(function(){var e=i.getAttribute("effect")||"",t="true"===i.getAttribute("homepage");new Swiper(".swiper#swiper-api",{slidesPerView:"auto",spaceBetween:8,centeredSlides:!t,effect:e,rewind:!t,loop:t,autoplay:t&&{disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}))})</script><script defer src="https://s4.zstatic.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js"></script><script>window.addEventListener("DOMContentLoaded",e=>{var l={distance:"3rem",duration:"800",interval:"100",scale:"1",opacity:0,easing:"ease-out"};ScrollReveal().reveal(".l_left .slide-up",l),ScrollReveal().reveal(".l_main .slide-up",l),ScrollReveal().reveal(".l_right .slide-up",l)})</script><script>document.addEventListener("DOMContentLoaded",function(){window.codeElements=document.querySelectorAll(".code"),0<window.codeElements.length&&(ctx.copycode={default_text:"Copy",success_text:"Copied",toast:"复制成功"},utils.js("/js/plugins/copycode.js"))})</script><script async src="https://umami.weekdaycare.cn/umamis" data-website-id="bbc30999-1e34-49d2-a98e-9a1318948de6"></script></div></body></html>